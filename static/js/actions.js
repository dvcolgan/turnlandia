// Generated by CoffeeScript 1.6.3
var ActionManager,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ActionManager = (function() {
  function ActionManager() {
    this.handleInitialPlacement = __bind(this.handleInitialPlacement, this);
    $(document).on('unitPlaced', this.handleInitialPlacement);
    this.actions = [];
  }

  ActionManager.prototype.add = function(action) {
    return this.actions.push(action);
  };

  ActionManager.prototype.handleInitialPlacement = function(event) {
    return $.ajax({
      url: '/api/action/',
      method: 'POST',
      dataType: 'json',
      data: {
        type: 'initial',
        col: event.col,
        row: event.row
      },
      success: function(response) {},
      error: function(response) {
        return alert("Error saving move.  Please check your internet connection and try again: " + (JSON.stringify(response)));
      }
    });
  };

  ActionManager.prototype.draw = function() {
    var action, i, _i, _len, _ref, _results;
    TB.ctx.textAlign = 'right';
    TB.fillOutlinedText("This Turn's Actions", TB.board.width - 16, 24);
    _ref = this.actions;
    _results = [];
    for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
      action = _ref[i];
      _results.push(TB.fillOutlinedText(action.name, TB.board.width - 16, 24 + i * 24 + 24));
    }
    return _results;
  };

  return ActionManager;

})();
